## 简介

支持蓝牙 4.0 的辉光管时钟，主控芯片为 STC15F2K60S2，主要特性如下：

- 六位数字显示
- 每隔 10 分钟循环显示所有数字，防止阴极中毒
- 四个氖灯，可独立控制，用于显示冒号、小数点等
- 每个辉光管下安装有一个全彩 LED，可调节 LED 颜色
- 支持闹钟
- 支持夜间模式，夜间自动关闭辉光管
- 可通过蓝牙对时钟进行设置
- 采用 SD2405ALPI 实时时钟，掉电后时间不会丢失
- 可通过蓝牙对时钟进行控制
- 带有自定义显示模式，可通过蓝牙显示任意数字（例如温度、网速等）

![辉光管时钟照片](https://blanboom.org/wp-content/uploads/2014/08/NixieClock.jpg)

## 开发环境

- Keil C51 µVision V4.72.9.0
- Altium Designer 14
- 蓝牙模块波特率已预先设置为 115200bps

## 蓝牙指令

*  TIMShhmmss    -  设置时间，hhmmss 为 24 时制时间
*  TIMAhhmmss    -  设置闹钟，hhmmss 为 24 时制时间
*  TIMLggrrbb    -  设置 LED 颜色，ggrrbb 为 LED 的 RGB 颜色
*  TIMMx         -  打开/关闭闹钟，x = 1 时打开，x = 0 时关闭
*  TIMDxxxxxxdd  -  进入自定义显示模式并显示内容，xxxxxx 为要显示的数字（支持空格），dd控制四个点的显示，范围为 0 ~ 15，其对应的四位二进制数中的各位分别代表四个点的状态（1 为亮，0 为灭）
*  TIMT          -  切换回时钟模式
*  TIMNx         -  夜间模式开关，x = 0 时关闭，x = 1 时打开。打开夜间模式后，凌晨 1 点到早上 6 点辉光管不显示时间

## 该版本硬件上的缺陷

* 蓝牙模块 和 排针引出的串口接口 均使用了 UART1，但 STC15F2K60S2 有两组 UART 接口，没能充分利用该单片机的片上资源。因此如果想要通过串口外接其他设备/模块，同时又要使用蓝牙功能，在程序上可能会麻烦一些。
* 高压和低压部分没有通过光耦等形式相隔离，电路故障时低压部分可能会损坏。
* PCB 布线不够整齐，元器件排布不太紧凑。另外六个辉光管的位置向下移动一点，应该会更美观。
* 蓝牙天线下有覆铜，对信号强度有不利影响。

## 感谢

在制作的过程中，[NixieClock.org](http://www.nixieclock.org) 中的文章给我带来了很大的帮助。在这里，对博主严泽远表示感谢。
